[维基百科/子网](https://zh.wikipedia.org/wiki/子网#网络掩码)

[IP 相关知识](https://zhidao.baidu.com/question/125214412.html)

<br>

### 背景知识

- 互联网依靠 TCP/IP 协议，在全球范围内实现不同硬件结构、不同操作系统、不同网络系统的互联

### IPv4 子网划分

- IPv4 地址被分为三部分：网络部分（network）、子网部分（subnetwork，现在常被认为是网络部分的一部分——尽管它本来是“rest”部分的一部分）和主机（host）部分。

- IP 地址是一个 32 位二进制数的地址,由 4 个 8 位字段组成，每个字段之间用点号隔开; 形如(十进制数)`xxx.xxx.xxx.xxx`
  - IP 地址 = 网络 ID + 主机 ID
  - 网络 ID: 统一的机构(IANA)负责对申请的组织(例: 中国电信?) 分配唯一的网络 ID
  - 主机 ID: 该组织(例: 中国电信?) 对自己的网络中的每一个主机分配一个唯一的主机 ID

### 分类

- 根据网络 ID 和主机 ID 的不同位数规则，可以将 IP 地址分为:
  - A: 7 位网络 ID 和 24 位主机 ID（分配殆尽）
  - B: 14 位网络 ID 和 16 位主机 ID（分配殆尽）
  - C: 21 位网络 ID 和 8 位主机 ID

| 类别 | 起始位 |   开始    |     结束      | 点分十进制掩码 |
| :--: | :----: | :-------: | :-----------: | :------------: |
|  A   |   0    |  0.0.0.0  |   127.0.0.0   |   255.0.0.0    |
|  B   |   10   | 128.0.0.0 |  191.255.0.0  |  255.255.0.0   |
|  C   |  110   | 192.0.0.0 | 223.255.255.0 | 255.255.255.0  |

```
默认情况下，一个IP地址由网络ID和主机ID组成，通过掩码，可以划分IP地址那些属于网络ID，那些属于主机ID，每一类IP地址都有默认的掩码，在实际的使用中，每个IP地址有个默认的掩码，这是很不实用的，所以就引入了子网掩码，这样，在实际中，IP地址就由网络ID、子网ID、主机ID三部分组成。
计算一个IP地址的主机ID和网络ID的步骤如下：
一、计算网络ID：只需要将IP地址和子网掩码进行与运算，所得结果即为该主机的网络ID

有IP地址192.168.0.1，对应的子网掩码为255.255.255.0；

将IP地址和子网掩码全部转换成二进制的形式，即IP地址是：11000000.10101000.00000000.00000001 ，子网掩码是：11111111.11111111.11111111.00000000；

将二进制形式的IP地址和子网掩码进行与运算；

运算结果为11000000.10101000.00000000.00000000，转换为十进制就是192.168.0.0，所以这个主机的网络ID就是192.168.0.0。

二、计算主机ID：只需要将子网掩码进行二进制按位取反，再和IP地址进行与运算，所得结果即为该主机的主机ID，步骤如下：
有IP地址192.168.0.1，对应的子网掩码为255.255.255.0；

将子网掩码转换成二进制的形式，即就是：11111111.11111111.11111111.00000000；

将子网掩码进行二进制按位取反，即就是：00000000.00000000.00000000.11111111;

将取反后的子网掩码和IP地址的二进制形式进行与运算；

结果为：00000000.00000000.00000000.00000001,转换为十进制就是0.0.0.1,所以这个主机的网络ID就是192.168.0.0。
```

### 网络 ID

1. 转换成二进制后
2. 网络 ID = IP (与) 子网掩码

### 主机 ID

1. 转换成二进制后
2. 主机 ID = IP (与) 取反的子网掩码

### 静态/动态 IP

> 大多数拨号上网的用户，由于其上网时间和空间的离散性，为每个用户分配一个固定的 IP 地址（静态 IP）是非常不可取的，这将造成 IP 地址资源的极大浪费。因此这些用户通常会在每次拨通 ISP 的主机后，自动获得一个动态的 IP 地址，该地址当然不是任意的，而是该 ISP 申请的网络 ID 和主机 ID 的合法区间中的某个地址。拨号用户任意两次连接时的 IP 地址很可能不同，但是在每次连接时间内 IP 地址不变。

后续整理 https://www.2cto.com/net/200412/2973.html
